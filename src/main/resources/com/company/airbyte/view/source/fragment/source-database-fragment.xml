<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<fragment xmlns="http://jmix.io/schema/flowui/fragment">
    <data>
        <instance id="sourceDc"
                  class="com.company.airbyte.dto.source.SourceDatabaseDTO">
            <loader id="sourceDl"/>
        </instance>
        <instance id="postgresDc" class="com.company.airbyte.dto.source.postgres.SourcePostgresDTO">
        </instance>
        <instance id="mssqlDc" class="com.company.airbyte.dto.source.mssql.SourceMssqlDTO">
        </instance>
        <instance id="passwordAuthDc" class="com.company.airbyte.dto.source.common.PasswordAuthenticationDTO">
        </instance>
        <instance id="sshKeyAuthDc" class="com.company.airbyte.dto.source.common.SSHKeyAuthenticationDTO">
        </instance>

    </data>

    <content>
        <vbox id="root" width="100%" padding="false" spacing="false" margin="false">
            <h3 text="msg://sourceDatabaseFragment.title">
            </h3>
            <formLayout id="sourceDatabaseDTOForm" dataContainer="sourceDc" width="100%">
                <responsiveSteps>
                    <responsiveStep minWidth="0" columns="1"/>
                    <responsiveStep minWidth="40em" columns="2"/>
                </responsiveSteps>
                <comboBox property="databaseType"
                          label="msg://sourceDatabaseFragment.databaseTypeLabel"
                          placeholder="msg://sourceDatabaseFragment.databaseTypePlaceholder"
                          required="true"
                          requiredMessage="msg://sourceDatabaseFragment.databaseTypeRequired"/>

                <textField property="database"
                           label="msg://sourceDatabaseFragment.databaseLabel"
                           placeholder="msg://sourceDatabaseFragment.databasePlaceholder"
                           required="true"
                           requiredMessage="msg://sourceDatabaseFragment.databaseRequired"/>

                <textField property="host"
                           label="msg://sourceDatabaseFragment.hostLabel"
                           placeholder="msg://sourceDatabaseFragment.hostPlaceholder"
                           required="true"
                           requiredMessage="msg://sourceDatabaseFragment.hostRequired"/>

                <textField property="port"
                           label="msg://sourceDatabaseFragment.portLabel"
                           placeholder="msg://sourceDatabaseFragment.portPlaceholder"
                           required="true"
                           requiredMessage="msg://sourceDatabaseFragment.portRequired"/>

                <textField property="schemas"
                           label="msg://sourceDatabaseFragment.schemaLabel"
                           placeholder="msg://sourceDatabaseFragment.schemaPlaceholder"/>

                <textField property="username"
                           label="msg://sourceDatabaseFragment.usernameLabel"
                           placeholder="msg://sourceDatabaseFragment.usernamePlaceholder"
                           required="true"
                           requiredMessage="msg://sourceDatabaseFragment.usernameRequired"/>

                <passwordField property="password"
                               label="msg://sourceDatabaseFragment.passwordLabel"
                               placeholder="msg://sourceDatabaseFragment.passwordPlaceholder"/>

                <comboBox property="tunnelMethod"
                          label="msg://sourceDatabaseFragment.sshLabel"
                          placeholder="msg://sourceDatabaseFragment.sshPlaceholder"/>

            </formLayout>
            <!-- SSH Tunnel Method Forms -->
            <formLayout id="sshTunnelContainer">

                <!-- Password Authentication Form -->
                <formLayout id="passwordAuthForm" dataContainer="passwordAuthDc" width="100%" visible="false">
                    <responsiveSteps>
                        <responsiveStep minWidth="0" columns="1"/>
                        <responsiveStep minWidth="40em" columns="2"/>
                    </responsiveSteps>

                    <textField property="tunnelHost"
                               label="msg://sourceDatabaseFragment.tunnelHostLabel"
                               placeholder="msg://sourceDatabaseFragment.tunnelHostPlaceholder"
                               required="true"
                               requiredMessage="msg://sourceDatabaseFragment.tunnelHostRequired"/>

                    <textField property="tunnelPort"
                               label="msg://sourceDatabaseFragment.tunnelPortLabel"
                               placeholder="msg://sourceDatabaseFragment.tunnelPortPlaceholder"/>

                    <textField property="tunnelUser"
                               label="msg://sourceDatabaseFragment.tunnelUserLabel"
                               placeholder="msg://sourceDatabaseFragment.tunnelUserPlaceholder"
                               required="true"
                               requiredMessage="msg://sourceDatabaseFragment.tunnelUserRequired"/>

                    <passwordField property="tunnelUserPassword"
                                   label="msg://sourceDatabaseFragment.tunnelPasswordLabel"
                                   placeholder="msg://sourceDatabaseFragment.tunnelPasswordPlaceholder"
                                   required="true"
                                   requiredMessage="msg://sourceDatabaseFragment.tunnelPasswordRequired"/>
                </formLayout>

                <!-- SSH Key Authentication Form -->
                <formLayout id="sshKeyAuthForm" dataContainer="sshKeyAuthDc" width="100%" visible="false">
                    <responsiveSteps>
                        <responsiveStep minWidth="0" columns="1"/>
                        <responsiveStep minWidth="40em" columns="2"/>
                    </responsiveSteps>

                    <textField property="tunnelHost"
                               label="msg://sourceDatabaseFragment.tunnelHostLabel"
                               placeholder="msg://sourceDatabaseFragment.tunnelHostPlaceholder"
                               required="true"
                               requiredMessage="msg://sourceDatabaseFragment.tunnelHostRequired"/>

                    <textField property="tunnelPort"
                               label="msg://sourceDatabaseFragment.tunnelPortLabel"
                               placeholder="msg://sourceDatabaseFragment.tunnelPortPlaceholder"/>

                    <textField property="tunnelUser"
                               label="msg://sourceDatabaseFragment.tunnelUserLabel"
                               placeholder="msg://sourceDatabaseFragment.tunnelUserPlaceholder"
                               required="true"
                               requiredMessage="msg://sourceDatabaseFragment.tunnelUserRequired"/>

                    <passwordField property="tunnelUserPassword"
                                   label="msg://sourceDatabaseFragment.sshKeyLabel"
                                   placeholder="msg://sourceDatabaseFragment.sshKeyPlaceholder"
                                   required="true"
                                   requiredMessage="msg://sourceDatabaseFragment.sshKeyRequired"/>
                </formLayout>

            </formLayout>
            <formLayout id="specificFieldsContainer">
                <!-- Postgres specific fields -->
                <formLayout id="postgresForm" dataContainer="postgresDc" width="100%" visible="false">
                    <responsiveSteps>
                        <responsiveStep minWidth="0" columns="1"/>
                        <responsiveStep minWidth="40em" columns="2"/>
                    </responsiveSteps>

                    <comboBox id="postgresSslModeComboBox"
                              property="sslMode"
                              label="msg://sourceDatabaseFragment.sslLabel"
                              placeholder="msg://sourceDatabaseFragment.sslPlaceholder"/>

                    <comboBox id="postgresReplicationMethodComboBox"
                              property="replicationMethod"
                              label="msg://sourceDatabaseFragment.replicationLabel"
                              placeholder="msg://sourceDatabaseFragment.replicationPlaceholder"/>
                </formLayout>

                <!-- MSSQL specific fields -->
                <formLayout id="mssqlForm" dataContainer="mssqlDc" width="100%" visible="false">
                    <responsiveSteps>
                        <responsiveStep minWidth="0" columns="1"/>
                        <responsiveStep minWidth="40em" columns="2"/>
                    </responsiveSteps>

                    <comboBox id="mssqlSslMethodComboBox"
                              property="sslMethod"
                              label="msg://sourceDatabaseFragment.sslLabel"
                              placeholder="msg://sourceDatabaseFragment.sslPlaceholder"/>

                    <comboBox id="mssqlReplicationMethodComboBox"
                              property="replicationMethod"
                              label="msg://sourceDatabaseFragment.replicationLabel"
                              placeholder="msg://sourceDatabaseFragment.replicationPlaceholder"
                              required="true"
                              requiredMessage="msg://sourceDatabaseFragment.replicationRequired"/>
                </formLayout>
            </formLayout>
            <textField property="jdbcUrlParams"
                       label="msg://sourceDatabaseFragment.jdbcLabel"
                       placeholder="msg://sourceDatabaseFragment.jdbcPlaceholder"
                       width="100%"/>
        </vbox>
    </content>
</fragment>
